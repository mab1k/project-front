<html>
<head>
    <title>RPG</title>
    <script src=https://code.jquery.com/jquery-3.6.0.min.js></script>
    <link href="/css/my.css" rel="stylesheet">
</head>
<body>
<h1>RPG admin panel</h1>
<table border="1" width="600" id="characterTable" >
    <thead>
    <tr>
        <th>#</th>
        <th>Name</th>
        <th>Title</th>
        <th>Race</th>
        <th>Profession</th>
        <th>Level</th>
        <th>Birthday</th>
        <th>Banned</th>
    </tr>
    </thead>
    <tbody>

    </tbody>
</table>

</body>
<script>
    async function fetchPlayers() {
        try {
            const response = await fetch('/rest/players');
            const players = await response.json();
            const tableBody = document.getElementById('characterTable').getElementsByTagName('tbody')[0];

            players.forEach((player, index) => {
                let row = tableBody.insertRow();
                row.insertCell(0).textContent = index + 1;
                row.insertCell(1).textContent = player.name;
                row.insertCell(2).textContent = player.title;
                row.insertCell(3).textContent = player.race;
                row.insertCell(4).textContent = player.profession;
                row.insertCell(5).textContent = player.level
                const timestamp = player.birthday;

                let dateRes = new Date(timestamp);
                console.log(dateRes);

               let resData = (dateRes.getMonth() + 1) + "/" + dateRes.getDate() + "/" + dateRes.getFullYear();

                row.insertCell(6).textContent = resData;
                row.insertCell(7).textContent = player.banned;
            });
        } catch (error) {
            console.error('Error fetching players:', error);
        }
    }

    fetchPlayers();

</script>
</html>